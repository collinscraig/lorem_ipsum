{{- $.Scratch.Add "index" slice -}}
  {{- range $index, $value := .Site.RegularPages -}}
    {{- if isset $value ".PublishDate" -}}
      {{- $.Scratch.Set "date" ($value.PublishDate.Format "2006-01-02T15:04:05-07:00") -}}
    {{- else -}}
      {{- $.Scratch.Set "date" ($value.Date.Format "2006-01-02T15:04:05-07:00") -}}
    {{- end -}} 
    {{- $.Scratch.Add "index" (dict "id" $index "title" $value.Title "permalink" $value.Permalink "date" ($.Scratch.Get "date") "categories"  $value.Params.categories "tags" $value.Params.tags "summary" $value.Summary "body" $value.Plain) -}}
  {{- end -}}
{{- $.Scratch.Get "index" | jsonify -}}
